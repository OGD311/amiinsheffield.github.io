<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>amIInSheffield</title>
    <meta name="author" content="Robin Tyler" />
    <link rel="stylesheet" href="css.css" />
  </head>
  <body>

    <header>
      <h1>Am I in Sheffield?</h1>
    </header>

    <div class="content">
      <a href="javascript:void(0);" onclick="openPopup()">
        <img class="downloadme" src="download.png" alt="Download">
      </a>

      <img src="image.png" style="width: 20%; object-fit: contain;">
    </div>

    <p><strong>NOTE WINDOWS ONLY</strong></p> 

    <div id="popup" class="popup">
      <div class="popup-content">
        <span class="close" onclick="closePopup()">&times;</span>
        <p id="countdown"></p>
        <div id="downloadButtonContainer">
          <button disabled>Download File</button>
        </div>
        <button id="reduceTimeButton">Reduce Time</button>  

        <script>
          var timeLeft;
          var countdownTimer;
          var hideReduceTimeButton;

          function openPopup() {
            document.getElementById("popup").style.display = "block";
            timeLeft = 60; // Set the countdown time in seconds
            var countdownElement = document.getElementById("countdown");
            var downloadButtonContainer = document.getElementById("downloadButtonContainer");
            var reduceTimeButton = document.getElementById("reduceTimeButton");

            countdownTimer = setInterval(function() {
              if (timeLeft <= 0) {
                clearInterval(countdownTimer);
                countdownElement.innerHTML = "Download is ready!";
                downloadButtonContainer.innerHTML = '<a href="/amiinsheffield.github.io/AmIInSheffield.zip"><button>Download File</button></a>';
              } else {
                countdownElement.innerHTML = timeLeft + " seconds remaining";
              }
              timeLeft -= 1;
            }, 1000);

            hideReduceTimeButton = setInterval(function() {
              if (timeLeft <= 0) {
                clearInterval(hideReduceTimeButton);
                reduceTimeButton.style.display = "none";
              }
            }, 1000);

            reduceTimeButton.addEventListener("click", function() {
              if (timeLeft > 0) {
                timeLeft -= 1;
              }
            });
          }

          function closePopup() {
            document.getElementById("popup").style.display = "none";
            clearInterval(countdownTimer);
            clearInterval(hideReduceTimeButton);
          }
        </script>
      </div>
    </div>

    <br><br>
    <script data-num-rows="20"
    src="https://s3-us-west-2.amazonaws.com/kaboodle/kaboodle.js"
    type="text/javascript"></script> 
  </body>
</html>
